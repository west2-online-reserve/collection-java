# 商品与订单管理系统

By杨文渊



## 项目功能



本系统支持以下主要功能：

- **产品管理**：包括添加、查看、更新和删除产品。
- **订单管理**：包括添加订单、查看订单、更新、删除订单等操作。
- **事务管理**：在插入和更新数据时使用事务控制，确保数据的一致性。
- **产品与订单关系**：支持一个订单包含多个产品（多对多关系）。

## 项目结构



src
    │  Test.java//测试系统功能
    │
    └─MySystem
        │  driver.properties//配置信息
        │
        ├─DaoImpl
        │      BaseDaoIml.java//基础管理
        │      GoodsDaoImpl.java//商品管理
        │      OrderDaoImpl.java//订单管理
        │
        ├─Entity//实体类
        │      Goods.java//商品
        │      Order.java//订单
        │
        ├─MyException
        │      GoodsNotFoundException.java
        │      IllegalOrderInformationException.java
        │      IllegalPriceException.java
        │      OrdersNotFoundException.java
        │
        └─Tools
                JDBCUtil.java

## 技术栈



- **JDBC**：用于连接 MySQL 数据库。
- **MySQL**：数据库管理系统，用于存储产品和订单信息。

## 主要功能



### 1. 商品管理



- **添加商品**：可以向数据库中插入新的商品记录。
- **查看商品**：通过商品ID,金额 查找商品，并返回商品的详细信息。
- **更新商品**：根据商品ID 更新已有的商品信息（如价格、名称等）。
- **删除商品**：根据商品ID 删除指定商品。

### 2. 订单管理



- **创建订单**：创建新的订单，订单中可以包含多个产品。每个订单有一个时间，ID，金额和相关的产品信息。
- **查看订单**：通过订单 ID 查找并显示订单的详细信息，包括订单日期，ID，金额和所包含的产品。
- **删除订单**：根据订单 ID 删除指定订单及其关联的订单产品。

### 3. 事务管理



- **事务控制**：在进行商品插入、更新或删除时，使用数据库事务进行控制，保证数据的一致性。如果发生错误，事务将回滚，确保数据不被不完整地提交。

## 实现过程



1. **数据库设计**：
   - 设计了三个主要的表：
     - `goods`：用于存储商品信息（包括 ID、名称、价格）。
     - `orders`：用于存储订单信息（包括订单 ID ，金额和订单时间）。
     - `orders_goods`：用于关联订单和产品的多对多关系（每条记录表示某个订单中的某个商品及其数量）。
   
2. **JDBC 工具类（JDBCUtils）**：
   - 通过 `JdbcUtils` 类提供数据库连接和事务管理。该类封装了数据库连接、事务开始、提交和回滚等操作，确保了代码的简洁性和事务的一致性。
   
3. **DAO 层**：
   - 为产品和订单分别设计了 baseDaoImpl抽象父类 ，定义了对数据库的基本操作（如增、查、改、删）。
   
4. **服务层**：
   - `GoodsDaoImpl` 和 `OrderDaoImpl` 类实现了相应的业务逻辑。这些服务类负责处理具体的业务操作，比如事务控制、数据验证等。
   
5. **订单与产品关系**：
   - 订单与产品之间的关系通过 `orders_goods` 表来实现多对多关联。每个订单可以包含多个商品，每个商品也可以出现在多个订单中。
   
6. **单元测试**：
   - 编写了简单的单元测试来验证系统的各项功能是否正确。例如，测试添加、修改、删除、查询商品和订单的功能，确保所有操作能够顺利完成。
   
     ## 心得
   
     
   
     - **数据库设计**：通过数据库三大范式的实践，对消除数据冗余的重要性有了进一步的了解。
     - **JDBC**：访问数据库时，java程序通过JDBC接口来访问，而JDBC接口则通过JDBC驱动来实现真正对数据库的访问。
     - **异常处理**：构建了统一的异常处理体系
     - 在编写过程中，订单的信息存贮方式，数据库的设计，事务的处理是我思考较久的。订单中的信息，我采用hash表的方式存储，保证了订单中商品的唯一性和获取信息的便捷性。而在数据库的设计中，未采用多表查询，而是新建了一个表来存储订单与商品的对应关系。在事务的处理中，我以为对于订单_商品表是基于订单需要被操作才需要被操作的，所以将对订单__商品表的操作的方法均设为私有，只能被类内调用，并且与调用方法采用同一个connection，这样在操作是不会被分为两个独立的事务，导致出错。